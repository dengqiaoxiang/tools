<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>interval存在延迟</title>
	</head>
	<body>
		
		<h3>存在延迟原因</h3>
		<ul>
			<li>宏观任务</li>
			<li>默认时间为10ms</li>
			<li>一些物理原因</li>
		</ul>
		
		<h3>解决方法：用setTimeout代替</h3>
		
		<script>
			function _interval(func,time) {
				var context = this
				var args = Array.prototype.slice.call(arguments,2)
				function interval(){
					setTimeout(function(){
						func.apply(context,args)
						interval()
					},time)
				}
				interval()
			}
			_interval(function(a){
				console.log(a)
			},1000, 2)
			
			
			// 观察者模式
			
			// 观察者与目标都有各自的基类, 观察者把自己注入到目标中, 在目标发生改变时, 观察者调用相对应的更新方法
			
			
			console.log('1232522.206'.replace(/\B(?=(\d{3})+(?!\d))/g,','))
			console.log('2020/12/20'.replace(/(\d{4})(\/|-)(\d{2})(\/|-)(\d{2})/,(m,$1,$2,$3)=>$3))
			
			
			
			
			
 		</script>
	</body>
</html>
